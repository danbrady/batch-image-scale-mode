<style>
  :root {
    --font-stack: 'Inter', sans-serif;
  }

  @keyframes fade {
    0% {
      opacity: 1
    }

    100% {
      opacity: 0
    }
  }

  .animate {
    animation: .3s ease-out 2s 1 forwards fade;
  }

  html {
    line-height: 1.15;
  }

  body {
    margin: 0;
    padding: 1rem;
    font-family: var(--font-stack);
    font-size: 0.875rem;
  }

  button,
  input,
  optgroup,
  select,
  textarea {
    font-family: inherit;
    font-size: 100%;
    line-height: 1.15;
    margin: 0;
  }

  button,
  input {
    overflow: visible;
  }

  button,
  select {
    text-transform: none;
  }

  button,
  [type="button"],
  [type="reset"],
  [type="submit"] {
    -webkit-appearance: button;
  }

  button::-moz-focus-inner,
  [type="button"]::-moz-focus-inner,
  [type="reset"]::-moz-focus-inner,
  [type="submit"]::-moz-focus-inner {
    border-style: none;
    padding: 0;
  }

  button:-moz-focusring,
  [type="button"]:-moz-focusring,
  [type="reset"]:-moz-focusring,
  [type="submit"]:-moz-focusring {
    outline: 1px dotted ButtonText;
  }

  .title {
    font-size: 1.2rem;
  }

</style>

<h1 class="title">Select image rectangles on canvas</h1>
<div>
  <p>
    <label for="scaleMode">Scale Mode:</label>
    <select id="scaleMode" name="scaleMode" class="select-menu">
      <option value="FILL">Fill</option>
      <option value="FIT">Fit</option>
      <option value="CROP">Crop</option>
      <option value="TILE">Tile</option>
    </select>

    <input type="submit" id="submit-post" value="Apply" class="submit">
  </p>

  <p id="status"></p>
</div>

<script>
  "use strict";
  document
    .getElementById('submit-post')
    .onclick = () => {
      const scaleMode = document
        .getElementById('scaleMode')
        .value;
      parent.postMessage({
        pluginMessage: {
          scaleMode
        }
      }, '*')
    }

  const onmessage = (event) => {
    const { appliedCount } = event.data.pluginMessage;
    const element = document.getElementById('status');

    element.textContent = `Updated ${appliedCount} rectangle(s)!`;

    element.classList.remove("animate");

    // Need this to trigger reflow
    void element.offsetWidth;

    element.classList.add("animate");
  }

</script>
